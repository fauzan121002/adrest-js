let tags=document.getElementsByTagName("include"),extendTags=document.getElementsByTagName("extends"),app=document.getElementById("incx"),fetchChain=[];for(let e of tags){let t=e.attributes.src?e.attributes.src.value:null;t?fetchChain.push(new Promise((e,n)=>{fetch(t).then(e=>e.text()).then(t=>{e(t)}).catch(e=>{n(e)})})):fetchChain.push(new Promise((t,n)=>{t(e.innerHTML)}))}Promise.all(fetchChain).then(e=>{for(value of e)app?app.insertAdjacentHTML("beforebegin",value):document.body.insertAdjacentHTML("beforeend",value);for(!app||app.parentNode.removeChild(app);tags[0];)tags[0].parentNode.removeChild(tags[0])});for(let e of extendTags){let t=e.attributes.src?e.attributes.src.value:null;t&&fetch(t).then(e=>e.text()).then(t=>{let n=document.createElement("html"),a=n;a.innerHTML=t;let r=n;r.innerHTML=a.innerHTML,document.head.innerHTML=r.getElementsByTagName("head")[0].innerHTML,e.innerHTML=r.getElementsByTagName("body")[0].innerHTML;let l=document.createDocumentFragment();for(;e.firstChild;)l.appendChild(e.firstChild);e.parentNode.replaceChild(l,e)}).catch(e=>{console.warn(e)})}